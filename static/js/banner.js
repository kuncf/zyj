"use strict";var bannerParamsDL={position:"bottom",attrClass:"down-iframe",attrName:"DBFrame",scale:.14,page:"/act/dnf/downloadBanner/index",background:"#000000",color:"#FFFFFF",opacity:1,isAPG:!1},gameInfoDL={openNative:"0",openNativeParams:{},gameId:"10014",icon:"",title:"",context:"",winWidth:0,action:20002,system:"Android",channelId:1,jumpToUrl:"",urlParams:"",reportId:"",reportGame:"",pageDomain:"qq.com",argEx:"0",isGameHelper:"0"},bannerDL={iframeW:0,iframeH:0,style:".%styleClass%{width:%iframeW%px;height:%iframeH%px;position:fixed;%position%:0;left:0;z-index:999;overflow:hidden;opacity:%opacity%}",html:'<iframe class="downloadbar %styleClass%" id="%iFrameName%" src="%src%" allowtransparency="true" frameborder="0" name="%iFrameName%"></iframe>',accMul:function(a,e){var r=0,a=a.toString(),e=e.toString();try{r+=a.split(".")[1].length}catch(t){}try{r+=e.split(".")[1].length}catch(t){}return Number(a.replace(".",""))*Number(e.replace(".",""))/Math.pow(10,r)},accDiv:function(a,e){var r,t,n=0,i=0;try{n=a.toString().split(".")[1].length}catch(o){}try{i=e.toString().split(".")[1].length}catch(o){}return r=Number(a.toString().replace(".","")),t=Number(e.toString().replace(".","")),this.accMul(r/t,Math.pow(10,i-n))},iframeWidth:function(){return window.innerWidth||document.documentElement.clientWidth},iframeHeight:function(a){var e=this.iframeW<320?420:this.iframeW;return Math.round(this.accMul(e,a))},setIFrame:function(a){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];bannerParamsDL.page="//"+location.host+bannerParamsDL.page;for(var r in e){if(void 0===bannerParamsDL[r])throw"setIFrame args[0] : "+r+" is redundant params";""!==e[r]&&null!==e[r]&&"object"!=typeof e[r]&&("scale"===r&&e[r]>.5&&(e[r]=.18),bannerParamsDL[r]=e[r])}for(var t in a){if(void 0===gameInfoDL[t])throw"setIFrame args[1] : "+t+" is redundant params";""!==a[t]&&null!==a[t]&&"object"!=typeof a[t]&&(gameInfoDL[t]=a[t])}gameInfoDL.urlParams=""===gameInfoDL.urlParams?"":btoa(gameInfoDL.urlParams),gameInfoDL.bg=bannerParamsDL.background,gameInfoDL.color=bannerParamsDL.color,gameInfoDL.opacity=bannerParamsDL.opacity,""===gameInfoDL.pageDomain?"":document.domain=gameInfoDL.pageDomain,console.log("gameInfoDL:",gameInfoDL),this.createBanner()},makeUrl:function(){var a=bannerParamsDL.page;(0===gameInfoDL.winWidth||void 0===gameInfoDL.winWidth)&&(gameInfoDL.winWidth="0"),gameInfoDL.scale=bannerParamsDL.scale;var e=navigator.userAgent;e.indexOf("iPhone")>=0?gameInfoDL.system="iPhone":e.indexOf("Android")>=0&&(gameInfoDL.system="android");var r=[];for(var t in gameInfoDL)void 0!==gameInfoDL[t]&&null!==gameInfoDL[t]&&""!==gameInfoDL[t]&&r.push(t+"="+gameInfoDL[t]);return r=r.join("&"),console.log(a+"?"+r),a+"?"+r},createBanner:function(){if(this.iframeW=this.iframeWidth(),this.iframeH=this.iframeHeight(bannerParamsDL.scale),"top"!==bannerParamsDL.position&&"bottom"!==bannerParamsDL.position)throw'args[0]: "'+bannerParamsDL.position+'" error';var a=document.head||document.getElementsByTagName("head")[0],e=document.body||document.getElementsByTagName("body")[0],r=this.html.replace("%styleClass%",bannerParamsDL.attrClass).replace(/%iFrameName%/g,bannerParamsDL.attrName).replace("%src%",this.makeUrl()),t=this.style.replace("%styleClass%",bannerParamsDL.attrClass).replace("%iframeW%",this.iframeW).replace("%iframeH%",this.iframeH).replace("%position%",bannerParamsDL.position).replace("%opacity%",bannerParamsDL.opacity),n=document.createElement("style"),i=document.createElement("div"),o=document.body.getElementsByTagName("script"),m=document.body.firstChild;if(i.setAttribute("class",bannerParamsDL.attrClass),i.innerHTML=r,bannerParamsDL.isAPG)e.insertBefore(i,m);else try{e.insertBefore(i,o[0])}catch(s){if(!(o.length>1))throw"scripts[0] is not a child of body";e.insertBefore(i,o[1])}n.appendChild(document.createTextNode(t)),a.appendChild(n)},resize:function(){var a=bannerParamsDL.attrName;this.iframeW=this.iframeWidth(),this.iframeH=this.iframeHeight(bannerParamsDL.scale);var e=document.getElementById(a);e.style.width=this.iframeW+"px",e.style.height=this.iframeH+"px"}};